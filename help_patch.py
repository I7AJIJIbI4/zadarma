def help_command(bot, update):
    user_id = update.effective_user.id
    logger.info(f"â“ /help Ð²Ð¸ÐºÐ»Ð¸ÐºÐ°Ð½Ð¾ ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡ÐµÐ¼: {user_id}")
    
    try:
        if user_id == ADMIN_USER_ID:
            help_message = (
                "ðŸ¤– Ð”ÐžÐ’Ð†Ð”ÐšÐ Ð”Ð›Ð¯ ÐÐ”ÐœÐ†ÐÐ†Ð¡Ð¢Ð ÐÐ¢ÐžÐ Ð\n\n"
                "ðŸ‘¥ ÐšÐžÐ Ð˜Ð¡Ð¢Ð£Ð’ÐÐ¦Ð¬ÐšÐ† ÐšÐžÐœÐÐÐ”Ð˜:\n"
                "ðŸšª /hvirtka - Ð’Ñ–Ð´ÐºÑ€Ð¸Ñ‚Ð¸ Ñ…Ð²Ñ–Ñ€Ñ‚ÐºÑƒ\n"
                "ðŸ  /vorota - Ð’Ñ–Ð´ÐºÑ€Ð¸Ñ‚Ð¸ Ð²Ð¾Ñ€Ð¾Ñ‚Ð°\n"
                "ðŸ“ž /call - Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½ Ð»Ñ–ÐºÐ°Ñ€Ñ Ð’Ñ–ÐºÑ‚Ð¾Ñ€Ñ–Ñ—\n"
                "ðŸ—ºï¸ /map - ÐšÐ°Ñ€Ñ‚Ð° Ñ€Ð¾Ð·Ñ‚Ð°ÑˆÑƒÐ²Ð°Ð½Ð½Ñ\n"
                "ðŸ“‹ /scheme - Ð¡Ñ…ÐµÐ¼Ð° Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ñƒ Ð² Ð–Ðš\n"
                "ðŸ§ª /test - Ð¢ÐµÑÑ‚ Ñ€Ð¾Ð±Ð¾Ñ‚Ð¸ Ð±Ð¾Ñ‚Ð°\n"
                "ðŸ“Š /status - Ð¡Ñ‚Ð°Ñ‚ÑƒÑ ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡Ð°\n\n"
                "ðŸ‘‘ ÐÐ”ÐœÐ†ÐÐ†Ð¡Ð¢Ð ÐÐ¢Ð˜Ð’ÐÐ† ÐšÐžÐœÐÐÐ”Ð˜:\n"
                "ðŸ“ˆ /stats - Ð—Ð°Ð³Ð°Ð»ÑŒÐ½Ð° ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ð´Ð·Ð²Ñ–Ð½ÐºÑ–Ð²\n"
                "ðŸ“Š /stats_detail - Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ð° ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°\n"
                "ðŸ”„ /sync - Ð ÑƒÑ‡Ð½Ð° ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ñ–Ð·Ð°Ñ†Ñ–Ñ ÐºÐ»Ñ–Ñ”Ð½Ñ‚Ñ–Ð²\n"
                "ðŸ”„ /restart - ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº Ð±Ð¾Ñ‚Ð°\n"
                "â“ /help - Ð¦Ñ Ð´Ð¾Ð²Ñ–Ð´ÐºÐ°\n\n"
                "ðŸ“± ÐšÐžÐÐ¢ÐÐšÐ¢Ð˜ ÐŸÐ†Ð”Ð¢Ð Ð˜ÐœÐšÐ˜:\n"
                "+380733103110"
            )
        elif is_authenticated(user_id):
            help_message = (
                "ðŸ¤– Ð”ÐžÐ’Ð†Ð”ÐšÐ ÐŸÐž ÐšÐžÐœÐÐÐ”ÐÐ¥\n\n"
                "ðŸ”“ Ð”ÐžÐ¡Ð¢Ð£ÐŸÐÐ† Ð”Ð†Ð‡:\n"
                "ðŸšª /hvirtka - Ð’Ñ–Ð´ÐºÑ€Ð¸Ñ‚Ð¸ Ñ…Ð²Ñ–Ñ€Ñ‚ÐºÑƒ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ñƒ\n"
                "ðŸ  /vorota - Ð’Ñ–Ð´ÐºÑ€Ð¸Ñ‚Ð¸ Ð²Ð¾Ñ€Ð¾Ñ‚Ð° Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾\n"
                "ðŸ“ž /call - Ð—Ð°Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½ÑƒÐ²Ð°Ñ‚Ð¸ Ð»Ñ–ÐºÐ°Ñ€ÑŽ Ð’Ñ–ÐºÑ‚Ð¾Ñ€Ñ–Ñ—\n"
                "ðŸ—ºï¸ /map - ÐŸÐ¾Ð´Ð¸Ð²Ð¸Ñ‚Ð¸ÑÑŒ Ñ€Ð¾Ð·Ñ‚Ð°ÑˆÑƒÐ²Ð°Ð½Ð½Ñ Ð½Ð° Ð¼Ð°Ð¿Ñ–\n"
                "ðŸ“‹ /scheme - Ð¡Ñ…ÐµÐ¼Ð° Ñ€Ð¾Ð·Ñ‚Ð°ÑˆÑƒÐ²Ð°Ð½Ð½Ñ Ð² Ð–Ðš Ð“Ñ€Ð°Ñ„ÑÑŒÐºÐ¸Ð¹\n\n"
                "â„¹ï¸ Ð†ÐÐ¤ÐžÐ ÐœÐÐ¦Ð†Ð™ÐÐ†:\n"
                "ðŸ§ª /test - ÐŸÐµÑ€ÐµÐ²Ñ–Ñ€Ð¸Ñ‚Ð¸ Ñ€Ð¾Ð±Ð¾Ñ‚Ñƒ Ð±Ð¾Ñ‚Ð°\n"
                "ðŸ“Š /status - Ð’Ð°Ñˆ ÑÑ‚Ð°Ñ‚ÑƒÑ Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ñ–\n"
                "â“ /help - Ð¦Ñ Ð´Ð¾Ð²Ñ–Ð´ÐºÐ°\n\n"
                "ðŸ’¡ ÐŸÐ†Ð”ÐšÐÐ—ÐšÐ˜:\n"
                "â€¢ Ð’Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÐ¹Ñ‚Ðµ Ð¼ÐµÐ½ÑŽ Ð´Ð»Ñ ÑˆÐ²Ð¸Ð´ÐºÐ¾Ð³Ð¾ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ñƒ\n"
                "â€¢ ÐŸÑ€Ð¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð°Ñ… Ð· Ð²Ñ–Ð´ÐºÑ€Ð¸Ñ‚Ñ‚ÑÐ¼ ÑÐ¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ñ‰Ðµ Ñ€Ð°Ð·\n"
                "â€¢ Ð”Ð»Ñ Ð¿Ñ–Ð´Ñ‚Ñ€Ð¸Ð¼ÐºÐ¸ Ð´Ð·Ð²Ð¾Ð½Ñ–Ñ‚ÑŒ: +380733103110"
            )
        else:
            help_message = (
                "ðŸ¤– Ð”ÐžÐ’Ð†Ð”ÐšÐ\n\n"
                "âŒ Ð’Ð¸ Ð½Ðµ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð¾Ð²Ð°Ð½Ñ– Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ñ–\n\n"
                "ðŸ“± Ð”Ð»Ñ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ñ–Ñ—:\n"
                "1. ÐÐ°Ñ‚Ð¸ÑÐ½Ñ–Ñ‚ÑŒ /start\n"
                "2. ÐŸÐ¾Ð´Ñ–Ð»Ñ–Ñ‚ÑŒÑÑ Ð½Ð¾Ð¼ÐµÑ€Ð¾Ð¼ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ñƒ\n"
                "3. Ð”Ð¾Ñ‡ÐµÐºÐ°Ð¹Ñ‚ÐµÑÑ Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð½Ñ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ñƒ\n\n"
                "ðŸ”“ Ð”ÐžÐ¡Ð¢Ð£ÐŸÐÐ† ÐšÐžÐœÐÐÐ”Ð˜:\n"
                "ðŸ“ž /call - Ð—Ð°Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½ÑƒÐ²Ð°Ñ‚Ð¸ Ð»Ñ–ÐºÐ°Ñ€ÑŽ\n"

# Ð—Ð½Ð°Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ñ€ÑÐ´Ð¾Ðº Ð· Ñ„ÑƒÐ½ÐºÑ†Ñ–Ñ”ÑŽ help_command
line_num=$(grep -n "def help_command" bot.py | cut -d: -f1)

# Ð¡Ñ‚Ð²Ð¾Ñ€ÑŽÑ”Ð¼Ð¾ Ð¿Ð°Ñ‚Ñ‡ Ñ„Ð°Ð¹Ð»
cat > help_patch.py << 'EOF'
def help_command(bot, update):
    user_id = update.effective_user.id
    logger.info(f"â“ /help Ð²Ð¸ÐºÐ»Ð¸ÐºÐ°Ð½Ð¾ ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡ÐµÐ¼: {user_id}")
    
    try:
        if user_id == ADMIN_USER_ID:
            help_message = (
                "ðŸ¤– Ð”ÐžÐ’Ð†Ð”ÐšÐ Ð”Ð›Ð¯ ÐÐ”ÐœÐ†ÐÐ†Ð¡Ð¢Ð ÐÐ¢ÐžÐ Ð\n\n"
                "ðŸ‘¥ ÐšÐžÐ Ð˜Ð¡Ð¢Ð£Ð’ÐÐ¦Ð¬ÐšÐ† ÐšÐžÐœÐÐÐ”Ð˜:\n"
                "ðŸšª /hvirtka - Ð’Ñ–Ð´ÐºÑ€Ð¸Ñ‚Ð¸ Ñ…Ð²Ñ–Ñ€Ñ‚ÐºÑƒ\n"
                "ðŸ  /vorota - Ð’Ñ–Ð´ÐºÑ€Ð¸Ñ‚Ð¸ Ð²Ð¾Ñ€Ð¾Ñ‚Ð°\n"
                "ðŸ“ž /call - Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½ Ð»Ñ–ÐºÐ°Ñ€Ñ Ð’Ñ–ÐºÑ‚Ð¾Ñ€Ñ–Ñ—\n"
                "ðŸ—ºï¸ /map - ÐšÐ°Ñ€Ñ‚Ð° Ñ€Ð¾Ð·Ñ‚Ð°ÑˆÑƒÐ²Ð°Ð½Ð½Ñ\n"
                "ðŸ“‹ /scheme - Ð¡Ñ…ÐµÐ¼Ð° Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ñƒ Ð² Ð–Ðš\n"
                "ðŸ§ª /test - Ð¢ÐµÑÑ‚ Ñ€Ð¾Ð±Ð¾Ñ‚Ð¸ Ð±Ð¾Ñ‚Ð°\n"
                "ðŸ“Š /status - Ð¡Ñ‚Ð°Ñ‚ÑƒÑ ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡Ð°\n\n"
                "ðŸ‘‘ ÐÐ”ÐœÐ†ÐÐ†Ð¡Ð¢Ð ÐÐ¢Ð˜Ð’ÐÐ† ÐšÐžÐœÐÐÐ”Ð˜:\n"
                "ðŸ“ˆ /stats - Ð—Ð°Ð³Ð°Ð»ÑŒÐ½Ð° ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ð´Ð·Ð²Ñ–Ð½ÐºÑ–Ð²\n"
                "ðŸ“Š /stats_detail - Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ð° ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°\n"
                "ðŸ”„ /sync - Ð ÑƒÑ‡Ð½Ð° ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ñ–Ð·Ð°Ñ†Ñ–Ñ ÐºÐ»Ñ–Ñ”Ð½Ñ‚Ñ–Ð²\n"
                "ðŸ”„ /restart - ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº Ð±Ð¾Ñ‚Ð°\n"
                "â“ /help - Ð¦Ñ Ð´Ð¾Ð²Ñ–Ð´ÐºÐ°\n\n"
                "ðŸ“± ÐšÐžÐÐ¢ÐÐšÐ¢Ð˜ ÐŸÐ†Ð”Ð¢Ð Ð˜ÐœÐšÐ˜:\n"
                "+380733103110"
            )
        elif is_authenticated(user_id):
            help_message = (
                "ðŸ¤– Ð”ÐžÐ’Ð†Ð”ÐšÐ ÐŸÐž ÐšÐžÐœÐÐÐ”ÐÐ¥\n\n"
                "ðŸ”“ Ð”ÐžÐ¡Ð¢Ð£ÐŸÐÐ† Ð”Ð†Ð‡:\n"
                "ðŸšª /hvirtka - Ð’Ñ–Ð´ÐºÑ€Ð¸Ñ‚Ð¸ Ñ…Ð²Ñ–Ñ€Ñ‚ÐºÑƒ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ñƒ\n"
                "ðŸ  /vorota - Ð’Ñ–Ð´ÐºÑ€Ð¸Ñ‚Ð¸ Ð²Ð¾Ñ€Ð¾Ñ‚Ð° Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾\n"
                "ðŸ“ž /call - Ð—Ð°Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½ÑƒÐ²Ð°Ñ‚Ð¸ Ð»Ñ–ÐºÐ°Ñ€ÑŽ Ð’Ñ–ÐºÑ‚Ð¾Ñ€Ñ–Ñ—\n"
                "ðŸ—ºï¸ /map - ÐŸÐ¾Ð´Ð¸Ð²Ð¸Ñ‚Ð¸ÑÑŒ Ñ€Ð¾Ð·Ñ‚Ð°ÑˆÑƒÐ²Ð°Ð½Ð½Ñ Ð½Ð° Ð¼Ð°Ð¿Ñ–\n"
                "ðŸ“‹ /scheme - Ð¡Ñ…ÐµÐ¼Ð° Ñ€Ð¾Ð·Ñ‚Ð°ÑˆÑƒÐ²Ð°Ð½Ð½Ñ Ð² Ð–Ðš Ð“Ñ€Ð°Ñ„ÑÑŒÐºÐ¸Ð¹\n\n"
                "â„¹ï¸ Ð†ÐÐ¤ÐžÐ ÐœÐÐ¦Ð†Ð™ÐÐ†:\n"
                "ðŸ§ª /test - ÐŸÐµÑ€ÐµÐ²Ñ–Ñ€Ð¸Ñ‚Ð¸ Ñ€Ð¾Ð±Ð¾Ñ‚Ñƒ Ð±Ð¾Ñ‚Ð°\n"
                "ðŸ“Š /status - Ð’Ð°Ñˆ ÑÑ‚Ð°Ñ‚ÑƒÑ Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ñ–\n"
                "â“ /help - Ð¦Ñ Ð´Ð¾Ð²Ñ–Ð´ÐºÐ°\n\n"
                "ðŸ’¡ ÐŸÐ†Ð”ÐšÐÐ—ÐšÐ˜:\n"
                "â€¢ Ð’Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÐ¹Ñ‚Ðµ Ð¼ÐµÐ½ÑŽ Ð´Ð»Ñ ÑˆÐ²Ð¸Ð´ÐºÐ¾Ð³Ð¾ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ñƒ\n"
                "â€¢ ÐŸÑ€Ð¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð°Ñ… Ð· Ð²Ñ–Ð´ÐºÑ€Ð¸Ñ‚Ñ‚ÑÐ¼ ÑÐ¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ñ‰Ðµ Ñ€Ð°Ð·\n"
                "â€¢ Ð”Ð»Ñ Ð¿Ñ–Ð´Ñ‚Ñ€Ð¸Ð¼ÐºÐ¸ Ð´Ð·Ð²Ð¾Ð½Ñ–Ñ‚ÑŒ: +380733103110"
            )
        else:
            help_message = (
                "ðŸ¤– Ð”ÐžÐ’Ð†Ð”ÐšÐ\n\n"
                "âŒ Ð’Ð¸ Ð½Ðµ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð¾Ð²Ð°Ð½Ñ– Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ñ–\n\n"
                "ðŸ“± Ð”Ð»Ñ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ñ–Ñ—:\n"
                "1. ÐÐ°Ñ‚Ð¸ÑÐ½Ñ–Ñ‚ÑŒ /start\n"
                "2. ÐŸÐ¾Ð´Ñ–Ð»Ñ–Ñ‚ÑŒÑÑ Ð½Ð¾Ð¼ÐµÑ€Ð¾Ð¼ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ñƒ\n"
                "3. Ð”Ð¾Ñ‡ÐµÐºÐ°Ð¹Ñ‚ÐµÑÑ Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð½Ñ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ñƒ\n\n"
                "ðŸ”“ Ð”ÐžÐ¡Ð¢Ð£ÐŸÐÐ† ÐšÐžÐœÐÐÐ”Ð˜:\n"
                "ðŸ“ž /call - Ð—Ð°Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½ÑƒÐ²Ð°Ñ‚Ð¸ Ð»Ñ–ÐºÐ°Ñ€ÑŽ\n"
                "ðŸ—ºï¸ /map - ÐŸÐ¾Ð´Ð¸Ð²Ð¸Ñ‚Ð¸ÑÑŒ Ñ€Ð¾Ð·Ñ‚Ð°ÑˆÑƒÐ²Ð°Ð½Ð½Ñ\n"
                "ðŸ“‹ /scheme - Ð¡Ñ…ÐµÐ¼Ð° Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ñƒ\n"
                "â“ /help - Ð¦Ñ Ð´Ð¾Ð²Ñ–Ð´ÐºÐ°\n\n"
                "ðŸ“ž Ð”Ð›Ð¯ Ð Ð•Ð„Ð¡Ð¢Ð ÐÐ¦Ð†Ð‡ Ð—Ð’Ð•Ð ÐÐ†Ð¢Ð¬Ð¡Ð¯:\n"
                "+380733103110\n"
                "Instagram: @dr.gomon"
            )
        
        bot.send_message(
            chat_id=update.message.chat_id,
            text=help_message
        )
        logger.info(f"â“ Ð”Ð¾Ð²Ñ–Ð´ÐºÐ° Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð° ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡Ñƒ {user_id}")
        
    except Exception as e:
        logger.exception(f"âŒ ÐŸÐ¾Ð¼Ð¸Ð»ÐºÐ° Ð² help_command: {e}")
        bot.send_message(
            chat_id=update.message.chat_id,
            text="ðŸ¤– Ð”ÐžÐ’Ð†Ð”ÐšÐ\n\nÐžÑÐ½Ð¾Ð²Ð½Ñ– ÐºÐ¾Ð¼Ð°Ð½Ð´Ð¸:\n/hvirtka - Ð’Ñ–Ð´ÐºÑ€Ð¸Ñ‚Ð¸ Ñ…Ð²Ñ–Ñ€Ñ‚ÐºÑƒ\n/vorota - Ð’Ñ–Ð´ÐºÑ€Ð¸Ñ‚Ð¸ Ð²Ð¾Ñ€Ð¾Ñ‚Ð°\n/call - Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½ Ð»Ñ–ÐºÐ°Ñ€Ñ\n/map - ÐšÐ°Ñ€Ñ‚Ð°\n/scheme - Ð¡Ñ…ÐµÐ¼Ð°\n\nÐ¢ÐµÑ…Ð¿Ñ–Ð´Ñ‚Ñ€Ð¸Ð¼ÐºÐ°: +380733103110"
        )

