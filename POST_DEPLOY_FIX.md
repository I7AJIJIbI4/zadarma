# üö® –®–í–ò–î–ö–ï –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø –ü–Ü–°–õ–Ø –î–ï–ü–õ–û–Æ

## üìã –í–∏—è–≤–ª–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏:
1. ‚ùå `python-telegram-bot==13.15` –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π (–ø–æ—Ç—Ä—ñ–±–µ–Ω 13.12)
2. ‚ùå `process_webhook.py` –≤—ñ–¥—Å—É—Ç–Ω—ñ–π
3. ‚ùå –¢–µ—Å—Ç–∏ webhook –ª–æ–≥—ñ–∫–∏ –Ω–µ –ø—Ä–æ–π—à–ª–∏

## ‚ö° –®–í–ò–î–ö–ï –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø

### –ù–∞ —Å–µ—Ä–≤–µ—Ä—ñ –≤–∏–∫–æ–Ω–∞—Ç–∏:
```bash
cd /home/gomoncli/zadarma

# –®–≤–∏–¥–∫–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –æ–¥–Ω–∏–º –∫–æ–º–∞–Ω–¥–æ—é:
curl -s https://raw.githubusercontent.com/I7AJIJIbI4/zadarma/main/quick_fix.sh | bash

# –ê–ë–û –ø–æ–∫—Ä–æ–∫–æ–≤–æ:
./fix_deployment_issues.sh
```

## üß™ –ü–ï–†–ï–í–Ü–†–ö–ê –ü–Ü–°–õ–Ø –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø

### 1. –°—Ç–∞—Ç—É—Å –±–æ—Ç–∞:
```bash
ps aux | grep bot.py
# –ü–æ–≤–∏–Ω–µ–Ω –ø–æ–∫–∞–∑–∞—Ç–∏ –∑–∞–ø—É—â–µ–Ω–∏–π –ø—Ä–æ—Ü–µ—Å
```

### 2. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥ –≤ Telegram:
- `/sync_status` - —Å—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó
- `/sync_test` - —Ç–µ—Å—Ç API –ø—ñ–¥–∫–ª—é—á–µ–Ω—å
- `/hvirtka` - —Ç–µ—Å—Ç –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è —Ö–≤—ñ—Ä—Ç–∫–∏
- `/vorota` - —Ç–µ—Å—Ç –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –≤–æ—Ä—ñ—Ç

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤:
```bash
tail -f bot.log                    # –õ–æ–≥–∏ –±–æ—Ç–∞
tail -f webhook_processor.log      # –õ–æ–≥–∏ webhook
```

### 4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Ç–µ—Å—Ç:
```bash
python3 test_server_functions.py
```

## üìÅ –ù–û–í–Ü –§–ê–ô–õ–ò –í –ü–†–û–Ñ–ö–¢–Ü

- `sync_management.py` - –∫–æ–º–∞–Ω–¥–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—î—é
- `process_webhook.py` - –ø–æ–∫—Ä–∞—â–µ–Ω–∞ –æ–±—Ä–æ–±–∫–∞ webhook
- `test_improved_sync.py` - —Ç–µ—Å—Ç–∏ –ª–æ–≥—ñ–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó  
- `test_server_functions.py` - —Ç–µ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ–π —Å–µ—Ä–≤–µ—Ä–∞
- `fix_deployment_issues.sh` - —Å–∫—Ä–∏–ø—Ç –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è
- `quick_fix.sh` - —à–≤–∏–¥–∫–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

## üîß –ù–û–í–Ü –ö–û–ú–ê–ù–î–ò –ë–û–¢–ê

### –î–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤:
- `/sync_status` - –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞—Ç—É—Å
- `/sync_clean` - –æ—á–∏—Å—Ç–∏—Ç–∏ –¥—É–±–ª—ñ–∫–∞—Ç–∏
- `/sync_full` - –ø–æ–≤–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è ‚ö†Ô∏è
- `/sync_test` - —Ç–µ—Å—Ç API
- `/sync_user <ID>` - —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- `/sync_help` - –¥–æ–≤—ñ–¥–∫–∞

## üìû –ü–†–ò –ü–†–û–ë–õ–ï–ú–ê–•

### 1. –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è:
```bash
python3 -c "import config; config.validate_config()"
python3 bot.py
```

### 2. –ö–æ–º–∞–Ω–¥–∏ –Ω–µ –ø—Ä–∞—Ü—é—é—Ç—å:
```bash
python3 -c "import sync_management; print('OK')"
```

### 3. Webhook –Ω–µ –ø—Ä–∞—Ü—é—î:
```bash
python3 process_webhook.py '{"duration":"10","disposition":"answered"}'
# –ú–∞—î –≤–∏–≤–µ—Å—Ç–∏: SUCCESS
```

### 4. –í—ñ–¥–∫–∞—Ç –¥–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó –≤–µ—Ä—Å—ñ—ó:
```bash
# –ó–Ω–∞–π—Ç–∏ backup
ls -la /home/gomoncli/backup/zadarma_update_*

# –í—ñ–¥–Ω–æ–≤–∏—Ç–∏ –∑ –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ backup
cd /home/gomoncli/zadarma
cp /home/gomoncli/backup/zadarma_update_–î–ê–¢–ê/* .
python3 bot.py &
```

## ‚úÖ –ö–†–ò–¢–ï–†–Ü–á –£–°–ü–Ü–•–£

- [ ] –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω–∏–π —ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –Ω–∞ –∫–æ–º–∞–Ω–¥–∏
- [ ] `/sync_status` –ø–æ–∫–∞–∑—É—î —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –±–µ–∑ –ø–æ–º–∏–ª–æ–∫  
- [ ] `/hvirtka` —Ç–∞ `/vorota` –ø—Ä–∞—Ü—é—é—Ç—å
- [ ] Webhook –æ–±—Ä–æ–±–ª—è—î –¥–∑–≤—ñ–Ω–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –õ–æ–≥–∏ –Ω–µ –º—ñ—Å—Ç—è—Ç—å –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫

## üìä –ú–û–ù–Ü–¢–û–†–ò–ù–ì

### –©–æ–¥–µ–Ω–Ω—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:
```bash
# –°—Ç–∞—Ç—É—Å –±–æ—Ç–∞
ps aux | grep bot.py

# –†–æ–∑–º—ñ—Ä –ª–æ–≥—ñ–≤
ls -lh *.log

# –û—Å—Ç–∞–Ω–Ω—ñ –ø–æ–º–∏–ª–∫–∏
tail -20 bot.log | grep ERROR
```

### –©–æ—Ç–∏–∂–Ω–µ–≤—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:
- –†–æ–∑–º—ñ—Ä –±–∞–∑ –¥–∞–Ω–∏—Ö
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤: `/sync_status`
- –¢–µ—Å—Ç –≤—Å—ñ—Ö API: `/sync_test`

---
**–°—Ç–≤–æ—Ä–µ–Ω–æ**: $(date)  
**–í–µ—Ä—Å—ñ—è**: 2.0 (–ø—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å)  
**–ü—ñ–¥—Ç—Ä–∏–º–∫–∞**: +380733103110
