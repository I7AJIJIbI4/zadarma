# üêç –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø –î–õ–Ø PYTHON 3.6

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–°–µ—Ä–≤–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Python 3.6, –∞ –Ω–æ–≤–∏–π –∫–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω–∏–π –ø—ñ–¥ Python 3.8+. –ü–æ—Ç—Ä—ñ–±–Ω–æ –∞–¥–∞–ø—Ç—É–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –ø—ñ–¥ —Å—Ç–∞—Ä—ñ—à—É –≤–µ—Ä—Å—ñ—é.

## ‚ö° –®–í–ò–î–ö–ï –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø

–ù–∞ —Å–µ—Ä–≤–µ—Ä—ñ –≤–∏–∫–æ–Ω–∞—Ç–∏:
```bash
cd /home/gomoncli/zadarma

# –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è
git pull origin main

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è
chmod +x python36_ultimate_fix.sh
./python36_ultimate_fix.sh
```

## üîß –©–û –†–û–ë–ò–¢–¨ –°–ö–†–ò–ü–¢

### 1. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ë–î
- –°—Ç–≤–æ—Ä—é—î —Ç–∞–±–ª–∏—Ü—ñ `clients` —Ç–∞ `users` –≤ `users.db`
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –¥–∞–Ω–∏—Ö

### 2. –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è bot.py
- –ö–æ–º–µ–Ω—Ç—É—î –ø—Ä–æ–±–ª–µ–º–Ω–∏–π —ñ–º–ø–æ—Ä—Ç `sync_management`
- –î–æ–¥–∞—î —ñ–º–ø–æ—Ä—Ç —Å—É–º—ñ—Å–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π –∑ `sync_stubs.py`

### 3. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è sync_stubs.py
- –ë–∞–∑–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –∫–æ–º–∞–Ω–¥ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó
- –°—É–º—ñ—Å–Ω—ñ—Å—Ç—å –∑ Python 3.6 (–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `.format()` –∑–∞–º—ñ—Å—Ç—å f-strings)
- Hardcoded admin IDs

### 4. –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è process_webhook.py
- –°–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥—ñ–∫–∞ –±–µ–∑ —Å–∫–ª–∞–¥–Ω–∏—Ö —ñ–º–ø–æ—Ä—Ç—ñ–≤
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ SUCCESS/ERROR

### 5. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º–∏
- –ó—É–ø–∏–Ω–∫–∞ —Ç–∞ –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É —Ç–∞ –ª–æ–≥—ñ–≤

## üìã –î–û–°–¢–£–ü–ù–ò–ô –§–£–ù–ö–¶–Ü–û–ù–ê–õ

### ‚úÖ –ü—Ä–∞—Ü—é—î:
- `/sync_status` - –ø–æ–∫–∞–∑—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤/–∫–ª—ñ—î–Ω—Ç—ñ–≤
- `/sync_test` - –±–∞–∑–æ–≤–∏–π —Ç–µ—Å—Ç —Å–∏—Å—Ç–µ–º–∏  
- `/hvirtka` —Ç–∞ `/vorota` - –æ—Å–Ω–æ–≤–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è
- Webhook –æ–±—Ä–æ–±–∫–∞ –¥–∑–≤—ñ–Ω–∫—ñ–≤
- –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ–π

### ‚ö†Ô∏è –û–±–º–µ–∂–µ–Ω–æ:
- `/sync_clean` - –æ—á–∏—â–µ–Ω–Ω—è –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤ (–∑–∞–≥–ª—É—à–∫–∞)
- `/sync_full` - –ø–æ–≤–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è (–∑–∞–≥–ª—É—à–∫–∞)
- `/sync_user` - —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–∑–∞–≥–ª—É—à–∫–∞)
- –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –ª–æ–≥—ñ–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó

## üß™ –¢–ï–°–¢–£–í–ê–ù–ù–Ø

### 1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É –±–æ—Ç–∞:
```bash
ps aux | grep bot.py
# –ü–æ–≤–∏–Ω–µ–Ω –ø–æ–∫–∞–∑–∞—Ç–∏ –∑–∞–ø—É—â–µ–Ω–∏–π –ø—Ä–æ—Ü–µ—Å
```

### 2. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤ Telegram:
- `/sync_status` - –º–∞—î –ø–æ–∫–∞–∑–∞—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ë–î
- `/sync_test` - –º–∞—î –ø–æ–∫–∞–∑–∞—Ç–∏ —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º–∏
- `/hvirtka` - –º–∞—î —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ –≤—ñ–¥–∫—Ä–∏—Ç–∏ –∫–∞–ª–∏—Ç–∫—É

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤:
```bash
tail -f bot.log                    # –û—Å–Ω–æ–≤–Ω—ñ –ª–æ–≥–∏
tail -f webhook_processor.log      # –õ–æ–≥–∏ webhook
```

### 4. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è webhook:
```bash
python3 process_webhook.py '{"duration":"10","disposition":"answered"}'
# –ú–∞—î –≤–∏–≤–µ—Å—Ç–∏: SUCCESS

python3 process_webhook.py '{"duration":"0","disposition":"no_answer"}'  
# –ú–æ–∂–µ –≤–∏–≤–µ—Å—Ç–∏: ERROR (–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –ª–æ–≥—ñ–∫–∏)
```

## üìä –û–ß–Ü–ö–£–í–ê–ù–Ü –†–ï–ó–£–õ–¨–¢–ê–¢–ò

### –î–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:
- ‚ùå `No module named 'config'`
- ‚ùå `no such table: clients`
- ‚ùå f-string –ø–æ–º–∏–ª–∫–∏ –Ω–∞ Python 3.6
- ‚ùå –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è

### –ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:
- ‚úÖ –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –±–µ–∑ –ø–æ–º–∏–ª–æ–∫
- ‚úÖ `/sync_status` –ø–æ–∫–∞–∑—É—î —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- ‚úÖ –û—Å–Ω–æ–≤–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –ø—Ä–∞—Ü—é—î
- ‚úÖ Webhook –æ–±—Ä–æ–±–ª—è—î –¥–∑–≤—ñ–Ω–∫–∏

## üîÑ –ü–õ–ê–ù –ú–Ü–ì–†–ê–¶–Ü–á –ù–ê PYTHON 3.8+

–î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–≤–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É –ø–æ—Ç—Ä—ñ–±–Ω–æ:

1. **–û–Ω–æ–≤–∏—Ç–∏ Python:**
```bash
# –ù–∞ Ubuntu/Debian
sudo apt update
sudo apt install python3.8 python3.8-venv python3.8-pip

# –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–µ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ –æ—Ç–æ—á–µ–Ω–Ω—è
python3.8 -m venv venv38
source venv38/bin/activate
pip install -r requirements.txt
```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–∏ –ø–æ–≤–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**
```bash
# –ó –Ω–æ–≤–∏–º Python
python3.8 bot.py
```

3. **–£–≤—ñ–º–∫–Ω—É—Ç–∏ –≤—Å—ñ –∫–æ–º–∞–Ω–¥–∏:**
- `/sync_clean` - –æ—á–∏—â–µ–Ω–Ω—è –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤
- `/sync_full` - –ø–æ–≤–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è  
- `/sync_user` - —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –ª–æ–≥—ñ–∫–∞ –æ–±—Ä–æ–±–∫–∏ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤

## üìû –ü–Ü–î–¢–†–ò–ú–ö–ê

### –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:

1. **–ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è:**
```bash
python3 -c "import bot"  # –ü–µ—Ä–µ–≤—ñ—Ä—è—î —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
python3 bot.py           # –ó–∞–ø—É—Å–∫ –∑ –≤–∏–≤–æ–¥–æ–º –ø–æ–º–∏–ª–æ–∫
```

2. **–ö–æ–º–∞–Ω–¥–∏ –Ω–µ –ø—Ä–∞—Ü—é—é—Ç—å:**
```bash
python3 -c "import sync_stubs; print('OK')"
```

3. **–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó –≤–µ—Ä—Å—ñ—ó:**
```bash
# –í—ñ–¥–Ω–æ–≤–∏—Ç–∏ –∑ backup
cp bot.py.backup.* bot.py
pkill -f "python3.*bot.py"
python3 bot.py &
```

### –ö–æ–Ω—Ç–∞–∫—Ç–∏:
- **–¢–µ–ª–µ—Ñ–æ–Ω**: +380733103110
- **Telegram**: –ù–∞–¥—ñ—à–ª—ñ—Ç—å `/help` –±–æ—Ç—É

## üìà –ú–ï–¢–†–ò–ö–ò –£–°–ü–Ü–•–£

- [ ] –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω–∏–π –±–µ–∑ –ø–æ–º–∏–ª–æ–∫
- [ ] `/sync_status` –ø–æ–∫–∞–∑—É—î —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- [ ] `/hvirtka` —Ç–∞ `/vorota` –ø—Ä–∞—Ü—é—é—Ç—å  
- [ ] Webhook –æ–±—Ä–æ–±–ª—è—î –¥–∑–≤—ñ–Ω–∫–∏
- [ ] –õ–æ–≥–∏ –Ω–µ –º—ñ—Å—Ç—è—Ç—å –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫

---
**–í–µ—Ä—Å—ñ—è**: Python 3.6 Compatible  
**–î–∞—Ç–∞**: $(date)  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
